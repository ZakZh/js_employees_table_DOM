function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||r(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}}var n,a,o,l=document.querySelector("body"),i=l.querySelector("table"),c=new function(){this.extremumLength=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return"string"==typeof e&&!(e.length<t)&&!(e.length>r)},this.extremumValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return"number"==typeof e&&!(e<t)&&!(e>r)},this.oneOfMany=function(e,t){return!!t.some(function(t){return t===e})}},u=["name","position","office","age","salary"],s=["Tokyo","Singapore","London","New York","Edinburgh","San Francisco"],m={cellInitialValue:"",cell:null},f={column:"",sortingType:""};function d(e){var t=e.parentElement,r=e.value.trim(),n=u[t.cellIndex];"name"!==n||c.extremumLength(r,4)||(p("Error!",["Incorrect ".concat(n," value!")],"error"),r=m.cellInitialValue),"age"===n&&(!c.extremumValue(+r,18,90)||isNaN(Number(r)))&&(p("Error!",["Incorrect ".concat(n," value!")],"error"),r=m.cellInitialValue),"office"!==n||c.oneOfMany(r,s)||(p("Error!",["Incorrect ".concat(n," value!")],"error"),r=m.cellInitialValue),"salary"===n&&(isNaN(r=Number(r.replace(/[$,]/g,"")))?(p("Error!",["Incorrect ".concat(n," value!")],"error"),r=m.cellInitialValue):r="$".concat(r.toLocaleString("en-US"))),t.textContent=r||m.cellInitialValue,m.cell=null}function p(e,r,n){var a=document.createElement("div"),o=document.createElement("h2"),i=document.createElement("ul");o.className="title",o.innerText=e;var c=r.map(function(e){var t=document.createElement("li");return t.innerText=e,t});i.append.apply(i,t(c)),a.classList.add("notification",n),a.dataset.qa="notification",a.append(o,i),l.append(a),window.setTimeout(function(){a.remove()},3e3)}l.appendChild((n=document.createElement("form"),(a=document.createElement("button")).type="submit",a.innerText="Save to table",o=u.map(function(e){var r=document.createElement("label"),n="office"===e?document.createElement("select"):document.createElement("input");if(n.name=e,n.dataset.qa=e,"age"===e||"salary"===e)n.type="number","age"===e&&(n.min=0,n.max=150);else if("office"===e){var a=document.createElement("option");a.innerText="(select office)",a.selected=!0;var o=s.map(function(e){var t=document.createElement("option");return t.innerText=e,t});n.append.apply(n,[a].concat(t(o)))}else n.type="text";return r.innerText=e[0].toUpperCase()+e.slice(1),r.append(n),r}),n.className="new-employee-form",n.append.apply(n,t(o).concat([a])),n)).addEventListener("click",function(e){if(e.preventDefault(),e.target.matches("button")){var n,a,o,l=function(e,n,a){var o={},l=[];n.forEach(function(r){t(e.form).forEach(function(e){e.dataset.qa===r&&(o[r]=e.value.trim())})}),c.extremumLength(o.name,4)||l.push("Too short name!"),c.extremumValue(+o.age,18,90)||l.push("Age must be between 18 and 90!"),c.oneOfMany(o.office,a)||l.push("Enter office");var i=!0,u=!1,s=void 0;try{for(var m,f=Object.entries(o)[Symbol.iterator]();!(i=(m=f.next()).done);i=!0){var d,p=(d=m.value,function(e){if(Array.isArray(e))return e}(d)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],l=!0,i=!1;try{for(a=a.call(e);!(l=(r=a.next()).done)&&(o.push(r.value),2!==o.length);l=!0);}catch(e){i=!0,n=e}finally{try{l||null==a.return||a.return()}finally{if(i)throw n}}return o}}(d,2)||r(d,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=p[0],v=p[1];v&&0!==v.length||l.push("Enter ".concat(y))}}catch(e){u=!0,s=e}finally{try{i||null==f.return||f.return()}finally{if(u)throw s}}return o.salary="$"+Number(o.salary).toLocaleString("en-US"),{status:0===l.length,data:o,validationErrors:l}}(e.target,u,s);!1===l.status?p("Error!",l.validationErrors,"error"):(p("Success!",["Data added to the table!"],"success"),i.tBodies[0].append((n=l.data,a=document.createElement("tr"),o=u.map(function(e){var t=document.createElement("td");return t.innerText=n[e],t}),a.append.apply(a,t(o)),a)),e.target.form.reset())}}),i.addEventListener("click",function(e){if(e.target.matches("th")){var t=(o=e.target,l=Array.from(i.tBodies[0].rows),c=f.column,u=f.sortingType,s=o.cellIndex,u=o.innerText===c&&"ASC"===u?"DESC":"ASC",l.sort(function(e,t){var r=e.children[s].innerText,n=t.children[s].innerText,a=parseFloat(r.replace(/[$,]/g,"")),o=parseFloat(n.replace(/[$,]/g,""));return isNaN(a)||isNaN(o)?"ASC"===u?r.localeCompare(n):n.localeCompare(r):"ASC"===u?a-o:o-a}),{column:o.innerText,sortingType:u,sortedRows:l});if(t&&t.sortedRows){f.column=t.column,f.sortingType=t.sortingType;var r=!0,n=!1,a=void 0;try{for(var o,l,c,u,s,m,d=t.sortedRows[Symbol.iterator]();!(r=(m=d.next()).done);r=!0){var p=m.value;i.tBodies[0].append(p)}}catch(e){n=!0,a=e}finally{try{r||null==d.return||d.return()}finally{if(n)throw a}}}}var y=!0,v=!1,g=void 0;if(e.target.parentElement.matches("tr"))try{for(var h,b=i.tBodies[0].rows[Symbol.iterator]();!(y=(h=b.next()).done);y=!0){var E=h.value;E.classList.remove("active"),E===e.target.parentElement&&E.classList.add("active")}}catch(e){v=!0,g=e}finally{try{y||null==b.return||b.return()}finally{if(v)throw g}}}),i.addEventListener("dblclick",function(e){if(e.target.matches("td")){m.cellInitialValue=e.target.innerText,m.cell=e.target;var t,r,n=(t=m.cellInitialValue,(r=document.createElement("input")).type="text",r.className="cell-input",r.value=t,r);e.target.replaceChildren(n),n.focus()}}),i.addEventListener("blur",function(e){e.target.classList.contains("cell-input")&&d(e.target)},!0),i.addEventListener("keydown",function(e){"Enter"===e.key&&e.target.classList.contains("cell-input")&&(e.preventDefault(),d(e.target))});
//# sourceMappingURL=index.a0eb0ac3.js.map
